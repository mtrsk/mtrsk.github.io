<svg id="note-graph" class="rounded-lg"></svg>
<script>
var graph_data = {"directed": true, "multigraph": false, "graph": {}, "nodes": [{"label": "The Mother of All Demos", "tooltip": "The Mother of All Demos", "lnk": "20231018195150-the_mother_of_all_demos", "id": "\"116d7265-e46f-4b42-b5ef-af1e913e2c12\"", "centrality": 0.15076319427043053, "communityLabel": 0}, {"label": "Hypermedia Systems", "tooltip": "Hypermedia Systems", "lnk": "20231015192823-hypermediasystems", "id": "\"10d70300-3c11-48f7-af3b-d5d07d5a5f39\"", "centrality": 0.49045791656225823, "communityLabel": 0}, {"label": "Helm", "tooltip": "Helm", "lnk": "20211023140908-helm", "id": "\"b9376a33-534c-4468-a788-df96a642a8e2\"", "centrality": 0.12576330120684692, "communityLabel": 1}, {"label": "Architectural Styles and the Design of Network-based Software Architectures", "tooltip": "Architectural Styles and the Design of Network-based Software Architectures", "lnk": "20231018195743-architectural_styles_and_the_design_of_network_based_software_architectures", "id": "\"f922bff8-f1ab-4322-a0af-b6eba02b2811\"", "centrality": 0.15076319427043053, "communityLabel": 0}, {"label": "DNS", "tooltip": "DNS", "lnk": "20211029092528-dns", "id": "\"f5f06bf3-d288-47a8-901f-37bec1ba50e7\"", "centrality": 0.0, "communityLabel": 2}, {"label": "Kubernetes-Storage", "tooltip": "Kubernetes-Storage", "lnk": "20211103110648-kubernetes_storage", "id": "\"1369d5e6-2858-4fc5-b59c-942326890b40\"", "centrality": 0.12576330120684692, "communityLabel": 3}, {"label": "Kubernetes-ConfigMaps", "tooltip": "Kubernetes-ConfigMaps", "lnk": "20211103202637-kubernetes_configmaps", "id": "\"c02e9bd0-e9fb-45d0-985a-4bdcbe62b8dc\"", "centrality": 0.12576330120684692, "communityLabel": 4}, {"label": "Kubernetes-Ingress", "tooltip": "Kubernetes-Ingress", "lnk": "20211208202505-kubernetes_ingress", "id": "\"bd5dba58-0dd8-4b89-aabb-8bd49ed8c27c\"", "centrality": 0.12576330120684692, "communityLabel": 4}, {"label": "kubectl", "tooltip": "kubectl", "lnk": "20211013230422-kubectl", "id": "\"ee377537-0c8d-48c9-a181-19a2cff8c4a7\"", "centrality": 0.13486212522205598, "communityLabel": 5}, {"label": "GitOps", "tooltip": "GitOps", "lnk": "20211201115324-gitops", "id": "\"e670c5d9-8238-4bf4-a916-e9ffb3097fa1\"", "centrality": 0.2757626595883486, "communityLabel": 5}, {"label": "As We May Think", "tooltip": "As We May Think", "lnk": "20231018194552-as_we_may_think", "id": "\"22759a84-3a09-464f-b0f7-e5d0a7bf5295\"", "centrality": 0.15076319427043053, "communityLabel": 0}, {"label": "Kubernetes-Secrets", "tooltip": "Kubernetes-Secrets", "lnk": "20211108165331-kubernetes_secrets", "id": "\"2bdf666d-f2a0-410a-a46a-45815fdf7285\"", "centrality": 0.12576330120684692, "communityLabel": 4}, {"label": "mandarin-chinese", "tooltip": "mandarin-chinese", "lnk": "20220204231800-mandarin_chinese", "id": "\"e699d35b-f546-4607-b444-d2be225d2574\"", "centrality": 0.0, "communityLabel": 6}, {"label": "Kubernetes", "tooltip": "Kubernetes", "lnk": "20211012215602-kubernetes", "id": "\"dd924a84-7d6f-41ec-98c2-aa16582c0d89\"", "centrality": 0.8460537079024607, "communityLabel": 4}, {"label": "SQL", "tooltip": "SQL", "lnk": "20240928223026-sql", "id": "\"11f7d9cc-51a6-4897-955b-37a756105677\"", "centrality": 0.12649928553529996, "communityLabel": 7}, {"label": "Postgres Server", "tooltip": "Postgres Server", "lnk": "20241001144549-postgres_server", "id": "\"ae205cab-10ea-4cff-9051-fef9021638b6\"", "centrality": 0.12649928553529996, "communityLabel": 8}, {"label": "Elixir", "tooltip": "Elixir", "lnk": "20241006120221-elixir", "id": "\"8d568d81-9c22-4d94-81b2-27a2d730ba98\"", "centrality": 0.1748860411723531, "communityLabel": 9}, {"label": "Erlang", "tooltip": "Erlang", "lnk": "20240619114451-erlang", "id": "\"de7d0e94-618f-4982-b3e5-8806d88cad5d\"", "centrality": 0.738483097967011, "communityLabel": 10}, {"label": "Linux", "tooltip": "Linux", "lnk": "20240924092617-linux", "id": "\"8a427ee7-2ef1-489b-af82-91de7be8a3ba\"", "centrality": 0.29937963527310535, "communityLabel": 11}, {"label": "STONITH", "tooltip": "STONITH", "lnk": "20240926235726-stonith", "id": "\"789326a5-20aa-4492-acb6-1474c3c11a4a\"", "centrality": 0.30302671340649373, "communityLabel": 12}, {"label": "SCSI", "tooltip": "SCSI", "lnk": "20241001154953-scsi", "id": "\"388e1a43-f7f6-4c9e-af19-d7b6116a070e\"", "centrality": 0.23173382508607993, "communityLabel": 13}, {"label": "Split Brain", "tooltip": "Split Brain", "lnk": "20240928110111-split_brain", "id": "\"582a4090-eb66-4dfd-8166-9acd3c97dcc9\"", "centrality": 0.18686332068708947, "communityLabel": 12}, {"label": "Algebraic Models for Accounting Systems", "tooltip": "Algebraic Models for Accounting Systems", "lnk": "20231005194145-algebraic_models_for_accounting_systems", "id": "\"9a03d556-ded4-4096-9a8c-c2147dee70a5\"", "centrality": 0.7452289582811296, "communityLabel": 14}, {"label": "Monoid", "tooltip": "Monoid", "lnk": "20231008214945-monoid", "id": "\"d89285be-d7a9-46a1-8a10-e14e73b66935\"", "centrality": 0.1337784581558392, "communityLabel": 15}, {"label": "Abelian Group", "tooltip": "Abelian Group", "lnk": "20231007164540-abelian_group", "id": "\"6550857e-ec3f-4b76-80ce-9b86df92601e\"", "centrality": 0.1337784581558392, "communityLabel": 16}, {"label": "Commutative Ring", "tooltip": "Commutative Ring", "lnk": "20231007164648-commutative_ring", "id": "\"44839048-b783-4a37-9267-b8e59160d90f\"", "centrality": 0.1337784581558392, "communityLabel": 14}, {"label": "Left R-Module", "tooltip": "Left R-Module", "lnk": "20231007165834-left_r_module", "id": "\"e4bd8f7b-a64d-4da3-b1e8-289d6fb0c441\"", "centrality": 0.1337784581558392, "communityLabel": 14}, {"label": "R-Module Homomorphism", "tooltip": "R-Module Homomorphism", "lnk": "20231007182834-r_module_homomorphism", "id": "\"e41608f8-fcf2-4b02-b502-9441c0aee369\"", "centrality": 0.1337784581558392, "communityLabel": 14}, {"label": "Nix", "tooltip": "Nix", "lnk": "20240922120854-nix", "id": "\"72d705ae-9f5c-402b-88e5-21744277319a\"", "centrality": 0.29937963527310535, "communityLabel": 17}, {"label": "NixOS Modules", "tooltip": "NixOS Modules", "lnk": "20240922141319-nixos_modules", "id": "\"01b79396-e6d4-4673-9438-95a120543f05\"", "centrality": 0.14491877591768185, "communityLabel": 17}, {"label": "Postgres", "tooltip": "Postgres", "lnk": "20240820100534-postgres", "id": "\"1949c98e-e1c0-474b-b383-c76aa418d583\"", "centrality": 1.0, "communityLabel": 18}, {"label": "Monad", "tooltip": "Monad", "lnk": "20240619115816-monad", "id": "\"a3e972e0-8db9-4556-9dca-0e4f6a663236\"", "centrality": 0.14491877591768185, "communityLabel": 19}, {"label": "NixOS", "tooltip": "NixOS", "lnk": "20241007121610-nixos", "id": "\"c350b99c-021d-4f5a-a948-4929056e1267\"", "centrality": 0.2898375518353637, "communityLabel": 17}, {"label": "Quorum", "tooltip": "Quorum", "lnk": "20240925092856-quorum", "id": "\"42950824-228d-48d6-abec-4e18908dfca0\"", "centrality": 0.28816699858062894, "communityLabel": 12}, {"label": "Designing for Scalability With Erlang/OTP", "tooltip": "Designing for Scalability With Erlang/OTP", "lnk": "20240709110323-designing_for_scalability_with_erlang", "id": "\"ffac18bd-4e44-4a7b-8a3a-a85552c9b076\"", "centrality": 0.1747934137955158, "communityLabel": 20}, {"label": "Distributed Replicated Block Device", "tooltip": "Distributed Replicated Block Device", "lnk": "20240924204159-drbd", "id": "\"694d20ba-bdb5-419d-ae9d-0dc73c695333\"", "centrality": 0.14491877591768185, "communityLabel": 11}, {"label": "Fallacies of Distributed Computing", "tooltip": "Fallacies of Distributed Computing", "lnk": "20241009110639-fallacies_of_distributed_computing", "id": "\"5a3ae2dc-5a54-4ba1-a638-f6090502d8ae\"", "centrality": 0.14014773419881094, "communityLabel": 21}, {"label": "Distributed Systems", "tooltip": "Distributed Systems", "lnk": "20211202213813-distributed_systems", "id": "\"d7efb05f-fb8f-438c-b09d-ea91dc24ebc3\"", "centrality": 0.6178434374216939, "communityLabel": 21}, {"label": "Internet Small Computer Systems Interface", "tooltip": "Internet Small Computer Systems Interface", "lnk": "20240924205200-iscsi", "id": "\"3a7a03ae-8932-4d86-ae45-aa84ff1f325a\"", "centrality": 0.1161633927194043, "communityLabel": 13}, {"label": "Cluster", "tooltip": "Cluster", "lnk": "20240926233504-clusters", "id": "\"d8a1a1ff-47e6-44bc-a627-83ca8dc61ecb\"", "centrality": 0.28816699858062894, "communityLabel": 12}, {"label": "The Two Generals' Problem", "tooltip": "The Two Generals' Problem", "lnk": "20241009131720-the_two_generals_problem", "id": "\"e9403288-b149-474c-928f-02e52e7cf78a\"", "centrality": 0.14014773419881094, "communityLabel": 21}, {"label": "CAP Theorem", "tooltip": "CAP Theorem", "lnk": "20240711090045-cap_theorem", "id": "\"74c5509d-73be-4b04-9ca4-039117d588a9\"", "centrality": 0.14014773419881094, "communityLabel": 21}, {"label": "Postgres CTEs", "tooltip": "Postgres CTEs", "lnk": "20240921191551-postgres_ctes", "id": "\"36f5efb2-34da-4d67-8c37-bbd5429d7b55\"", "centrality": 0.12649928553529996, "communityLabel": 22}, {"label": "Postgres Functions", "tooltip": "Postgres Functions", "lnk": "20240921194441-postgres_functions", "id": "\"32e8ab3c-2b96-410f-b60d-fde9e35b49f3\"", "centrality": 0.12649928553529996, "communityLabel": 23}, {"label": "Postgres Indexes", "tooltip": "Postgres Indexes", "lnk": "20240921194608-postgres_indexes", "id": "\"48dd781f-123c-4508-82b5-ac9b05383db4\"", "centrality": 0.12649928553529996, "communityLabel": 18}, {"label": "Postgres Subqueries", "tooltip": "Postgres Subqueries", "lnk": "20240918131408-postgres_subqueries", "id": "\"60f014f9-8a82-43b8-ae13-dee68b9470bf\"", "centrality": 0.12649928553529996, "communityLabel": 18}, {"label": "Postgres Window Functions", "tooltip": "Postgres Window Functions", "lnk": "20240923110122-postgres_window_functions", "id": "\"860f97f8-e41d-480b-881b-203773406990\"", "centrality": 0.12649928553529996, "communityLabel": 18}, {"label": "Byzantine Generals Problem", "tooltip": "Byzantine Generals Problem", "lnk": "20240816193136-byzantine_generals_problem", "id": "\"68219535-efeb-4835-9670-fd2747376cf3\"", "centrality": 0.14014773419881094, "communityLabel": 21}, {"label": "Immutable Architectures", "tooltip": "Immutable Architectures", "lnk": "20241009115044-immutable_architectures", "id": "\"0fee39a3-5d70-4dfb-8603-7d50d8e4777e\"", "centrality": 0.0, "communityLabel": 24}, {"label": "Erlang ETS", "tooltip": "Erlang ETS", "lnk": "20241010093430-erlang_ets", "id": "\"37c6ea44-0c80-4c57-a36e-98d37e8a3413\"", "centrality": 0.09191045573375643, "communityLabel": 25}, {"label": "Sequential Erlang", "tooltip": "Sequential Erlang", "lnk": "20240924122449-sequential_erlang", "id": "\"f0da3356-3797-4ddc-8306-cd333f159754\"", "centrality": 0.16882656259138418, "communityLabel": 10}, {"label": "Relational Algebra", "tooltip": "Relational Algebra", "lnk": "20241010155009-relational_algebra", "id": "\"11914357-b272-40fc-8bf6-a0ff98af0c99\"", "centrality": 0.23568687484338746, "communityLabel": 26}, {"label": "Relational Theory", "tooltip": "Relational Theory", "lnk": "20241009215607-relational_theory", "id": "\"abcb3048-34a5-4561-885c-74b8285924ac\"", "centrality": 0.23568687484338746, "communityLabel": 26}, {"label": "The Effective Manager", "tooltip": "The Effective Manager", "lnk": "20211107141903-the_effective_manager", "id": "\"32b2fe5a-3bc3-439b-a850-70a539498e9e\"", "centrality": 0.17199411441366985, "communityLabel": 27}, {"label": "Managing a Programming Project", "tooltip": "Managing a Programming Project", "lnk": "20230411100120-managing_a_programming_project", "id": "\"da4d5031-66cb-4d1c-b8cf-24d12adf5c17\"", "centrality": 0.17199411441366985, "communityLabel": 27}, {"label": "Management", "tooltip": "Management", "lnk": "20241009203936-management", "id": "\"1d989967-2878-40ab-827d-c4d1a91e0011\"", "centrality": 0.36307239570282307, "communityLabel": 27}, {"label": "Dependent Types", "tooltip": "Dependent Types", "lnk": "20241011135759-dependent_types", "id": "\"7580b45a-1dba-4690-bfbf-652fee25e1d9\"", "centrality": 0.14491877591768185, "communityLabel": 28}, {"label": "Type-Driven Development with Idris", "tooltip": "Type-Driven Development with Idris", "lnk": "20240715225258-type_driven_development", "id": "\"794f5acf-354c-49bf-943f-33480ade38f2\"", "centrality": 0.29937963527310535, "communityLabel": 28}, {"label": "Functional Programming", "tooltip": "Functional Programming", "lnk": "20241011135148-functional_programming", "id": "\"171718cd-10fd-484b-8d77-0ffcffc29163\"", "centrality": 0.2898375518353637, "communityLabel": 19}, {"label": "Haskell", "tooltip": "Haskell", "lnk": "20241008121957-haskell", "id": "\"a74d6aac-dbe9-48a6-83ca-648cd6ea933e\"", "centrality": 0.29937963527310535, "communityLabel": 19}, {"label": "History of Logic", "tooltip": "History of Logic", "lnk": "20211104221056-history_of_logic", "id": "\"0c082d02-4771-4860-8119-83b263c00ff3\"", "centrality": 0.0, "communityLabel": 29}, {"label": "Dializer", "tooltip": "Dializer", "lnk": "20241009092203-dializer", "id": "\"54473599-719d-460b-92ba-3796dd951872\"", "centrality": 0.1748860411723531, "communityLabel": 9}, {"label": "Erlang Shell", "tooltip": "Erlang Shell", "lnk": "20241004123538-erlang_shell", "id": "\"bcd04f60-0a4c-4213-90f7-139c0ddf5bef\"", "centrality": 0.08288295806175941, "communityLabel": 30}, {"label": "Concurrent Erlang", "tooltip": "Concurrent Erlang", "lnk": "20240930224229-concurrent_erlang", "id": "\"63607e63-4428-4578-bf2a-12a49649b49c\"", "centrality": 0.16882656259138418, "communityLabel": 10}, {"label": "supervisor", "tooltip": "supervisor", "lnk": "20241013103835-supervisor", "id": "\"2daf1307-afb4-49e4-98cb-66ac7eb27cf0\"", "centrality": 0.09191045573375643, "communityLabel": 25}, {"label": "OTP", "tooltip": "OTP", "lnk": "20240928181517-otp", "id": "\"6ed3a191-0128-453e-b0b6-37c48593a6f0\"", "centrality": 0.607187886078691, "communityLabel": 25}, {"label": "gen_server", "tooltip": "gen_server", "lnk": "20241010094109-gen_server", "id": "\"1cd8fd81-a7c4-44ea-8b7a-d803e9b491af\"", "centrality": 0.09191045573375643, "communityLabel": 25}, {"label": "Relation", "tooltip": "Relation", "lnk": "20241013113437-relation", "id": "\"efd79527-1cfb-48da-868e-6286cff21c34\"", "centrality": 0.23568687484338746, "communityLabel": 31}, {"label": "Partial Order", "tooltip": "Partial Order", "lnk": "20241013114603-partial_orders", "id": "\"ce27d04b-aa7b-4fd5-98d3-30aa645f0d46\"", "centrality": 0.23568687484338746, "communityLabel": 31}, {"label": "Error Handling in Erlang", "tooltip": "Error Handling in Erlang", "lnk": "20241001192402-error_handling_in_erlang", "id": "\"22ae9c25-3123-4ed8-b765-369ac89d2942\"", "centrality": 0.2617385674889284, "communityLabel": 10}], "links": [{"predicted": 0.3333333333333333, "source": "\"116d7265-e46f-4b42-b5ef-af1e913e2c12\"", "target": "\"f922bff8-f1ab-4322-a0af-b6eba02b2811\""}, {"source": "\"10d70300-3c11-48f7-af3b-d5d07d5a5f39\"", "target": "\"22759a84-3a09-464f-b0f7-e5d0a7bf5295\""}, {"source": "\"10d70300-3c11-48f7-af3b-d5d07d5a5f39\"", "target": "\"116d7265-e46f-4b42-b5ef-af1e913e2c12\""}, {"source": "\"10d70300-3c11-48f7-af3b-d5d07d5a5f39\"", "target": "\"f922bff8-f1ab-4322-a0af-b6eba02b2811\""}, {"source": "\"b9376a33-534c-4468-a788-df96a642a8e2\"", "target": "\"dd924a84-7d6f-41ec-98c2-aa16582c0d89\""}, {"source": "\"1369d5e6-2858-4fc5-b59c-942326890b40\"", "target": "\"dd924a84-7d6f-41ec-98c2-aa16582c0d89\""}, {"source": "\"c02e9bd0-e9fb-45d0-985a-4bdcbe62b8dc\"", "target": "\"dd924a84-7d6f-41ec-98c2-aa16582c0d89\""}, {"source": "\"bd5dba58-0dd8-4b89-aabb-8bd49ed8c27c\"", "target": "\"dd924a84-7d6f-41ec-98c2-aa16582c0d89\""}, {"source": "\"e670c5d9-8238-4bf4-a916-e9ffb3097fa1\"", "target": "\"ee377537-0c8d-48c9-a181-19a2cff8c4a7\""}, {"source": "\"e670c5d9-8238-4bf4-a916-e9ffb3097fa1\"", "target": "\"dd924a84-7d6f-41ec-98c2-aa16582c0d89\""}, {"predicted": 0.3333333333333333, "source": "\"22759a84-3a09-464f-b0f7-e5d0a7bf5295\"", "target": "\"116d7265-e46f-4b42-b5ef-af1e913e2c12\""}, {"predicted": 0.3333333333333333, "source": "\"22759a84-3a09-464f-b0f7-e5d0a7bf5295\"", "target": "\"f922bff8-f1ab-4322-a0af-b6eba02b2811\""}, {"source": "\"2bdf666d-f2a0-410a-a46a-45815fdf7285\"", "target": "\"dd924a84-7d6f-41ec-98c2-aa16582c0d89\""}, {"source": "\"ae205cab-10ea-4cff-9051-fef9021638b6\"", "target": "\"1949c98e-e1c0-474b-b383-c76aa418d583\""}, {"source": "\"8d568d81-9c22-4d94-81b2-27a2d730ba98\"", "target": "\"de7d0e94-618f-4982-b3e5-8806d88cad5d\""}, {"source": "\"789326a5-20aa-4492-acb6-1474c3c11a4a\"", "target": "\"388e1a43-f7f6-4c9e-af19-d7b6116a070e\""}, {"source": "\"582a4090-eb66-4dfd-8166-9acd3c97dcc9\"", "target": "\"d8a1a1ff-47e6-44bc-a627-83ca8dc61ecb\""}, {"predicted": 0.6666666666666666, "source": "\"582a4090-eb66-4dfd-8166-9acd3c97dcc9\"", "target": "\"789326a5-20aa-4492-acb6-1474c3c11a4a\""}, {"source": "\"9a03d556-ded4-4096-9a8c-c2147dee70a5\"", "target": "\"d89285be-d7a9-46a1-8a10-e14e73b66935\""}, {"source": "\"9a03d556-ded4-4096-9a8c-c2147dee70a5\"", "target": "\"6550857e-ec3f-4b76-80ce-9b86df92601e\""}, {"source": "\"9a03d556-ded4-4096-9a8c-c2147dee70a5\"", "target": "\"44839048-b783-4a37-9267-b8e59160d90f\""}, {"source": "\"9a03d556-ded4-4096-9a8c-c2147dee70a5\"", "target": "\"e4bd8f7b-a64d-4da3-b1e8-289d6fb0c441\""}, {"source": "\"9a03d556-ded4-4096-9a8c-c2147dee70a5\"", "target": "\"e41608f8-fcf2-4b02-b502-9441c0aee369\""}, {"source": "\"01b79396-e6d4-4673-9438-95a120543f05\"", "target": "\"72d705ae-9f5c-402b-88e5-21744277319a\""}, {"source": "\"1949c98e-e1c0-474b-b383-c76aa418d583\"", "target": "\"11f7d9cc-51a6-4897-955b-37a756105677\""}, {"source": "\"1949c98e-e1c0-474b-b383-c76aa418d583\"", "target": "\"36f5efb2-34da-4d67-8c37-bbd5429d7b55\""}, {"source": "\"1949c98e-e1c0-474b-b383-c76aa418d583\"", "target": "\"32e8ab3c-2b96-410f-b60d-fde9e35b49f3\""}, {"source": "\"1949c98e-e1c0-474b-b383-c76aa418d583\"", "target": "\"48dd781f-123c-4508-82b5-ac9b05383db4\""}, {"source": "\"1949c98e-e1c0-474b-b383-c76aa418d583\"", "target": "\"60f014f9-8a82-43b8-ae13-dee68b9470bf\""}, {"source": "\"1949c98e-e1c0-474b-b383-c76aa418d583\"", "target": "\"860f97f8-e41d-480b-881b-203773406990\""}, {"source": "\"a3e972e0-8db9-4556-9dca-0e4f6a663236\"", "target": "\"a74d6aac-dbe9-48a6-83ca-648cd6ea933e\""}, {"predicted": 0.5, "source": "\"a3e972e0-8db9-4556-9dca-0e4f6a663236\"", "target": "\"171718cd-10fd-484b-8d77-0ffcffc29163\""}, {"source": "\"c350b99c-021d-4f5a-a948-4929056e1267\"", "target": "\"8a427ee7-2ef1-489b-af82-91de7be8a3ba\""}, {"source": "\"c350b99c-021d-4f5a-a948-4929056e1267\"", "target": "\"72d705ae-9f5c-402b-88e5-21744277319a\""}, {"predicted": 0.5, "source": "\"c350b99c-021d-4f5a-a948-4929056e1267\"", "target": "\"01b79396-e6d4-4673-9438-95a120543f05\""}, {"source": "\"42950824-228d-48d6-abec-4e18908dfca0\"", "target": "\"d8a1a1ff-47e6-44bc-a627-83ca8dc61ecb\""}, {"source": "\"42950824-228d-48d6-abec-4e18908dfca0\"", "target": "\"582a4090-eb66-4dfd-8166-9acd3c97dcc9\""}, {"source": "\"42950824-228d-48d6-abec-4e18908dfca0\"", "target": "\"789326a5-20aa-4492-acb6-1474c3c11a4a\""}, {"source": "\"ffac18bd-4e44-4a7b-8a3a-a85552c9b076\"", "target": "\"6ed3a191-0128-453e-b0b6-37c48593a6f0\""}, {"source": "\"ffac18bd-4e44-4a7b-8a3a-a85552c9b076\"", "target": "\"de7d0e94-618f-4982-b3e5-8806d88cad5d\""}, {"source": "\"694d20ba-bdb5-419d-ae9d-0dc73c695333\"", "target": "\"8a427ee7-2ef1-489b-af82-91de7be8a3ba\""}, {"source": "\"5a3ae2dc-5a54-4ba1-a638-f6090502d8ae\"", "target": "\"d7efb05f-fb8f-438c-b09d-ea91dc24ebc3\""}, {"source": "\"3a7a03ae-8932-4d86-ae45-aa84ff1f325a\"", "target": "\"388e1a43-f7f6-4c9e-af19-d7b6116a070e\""}, {"source": "\"d8a1a1ff-47e6-44bc-a627-83ca8dc61ecb\"", "target": "\"789326a5-20aa-4492-acb6-1474c3c11a4a\""}, {"source": "\"e9403288-b149-474c-928f-02e52e7cf78a\"", "target": "\"d7efb05f-fb8f-438c-b09d-ea91dc24ebc3\""}, {"source": "\"74c5509d-73be-4b04-9ca4-039117d588a9\"", "target": "\"d7efb05f-fb8f-438c-b09d-ea91dc24ebc3\""}, {"source": "\"68219535-efeb-4835-9670-fd2747376cf3\"", "target": "\"d7efb05f-fb8f-438c-b09d-ea91dc24ebc3\""}, {"predicted": 0.25, "source": "\"68219535-efeb-4835-9670-fd2747376cf3\"", "target": "\"e9403288-b149-474c-928f-02e52e7cf78a\""}, {"predicted": 0.25, "source": "\"68219535-efeb-4835-9670-fd2747376cf3\"", "target": "\"74c5509d-73be-4b04-9ca4-039117d588a9\""}, {"source": "\"37c6ea44-0c80-4c57-a36e-98d37e8a3413\"", "target": "\"6ed3a191-0128-453e-b0b6-37c48593a6f0\""}, {"source": "\"f0da3356-3797-4ddc-8306-cd333f159754\"", "target": "\"de7d0e94-618f-4982-b3e5-8806d88cad5d\""}, {"predicted": 0.4583333333333333, "source": "\"f0da3356-3797-4ddc-8306-cd333f159754\"", "target": "\"63607e63-4428-4578-bf2a-12a49649b49c\""}, {"source": "\"abcb3048-34a5-4561-885c-74b8285924ac\"", "target": "\"11914357-b272-40fc-8bf6-a0ff98af0c99\""}, {"predicted": 0.5, "source": "\"da4d5031-66cb-4d1c-b8cf-24d12adf5c17\"", "target": "\"32b2fe5a-3bc3-439b-a850-70a539498e9e\""}, {"source": "\"1d989967-2878-40ab-827d-c4d1a91e0011\"", "target": "\"da4d5031-66cb-4d1c-b8cf-24d12adf5c17\""}, {"source": "\"1d989967-2878-40ab-827d-c4d1a91e0011\"", "target": "\"32b2fe5a-3bc3-439b-a850-70a539498e9e\""}, {"source": "\"794f5acf-354c-49bf-943f-33480ade38f2\"", "target": "\"171718cd-10fd-484b-8d77-0ffcffc29163\""}, {"source": "\"794f5acf-354c-49bf-943f-33480ade38f2\"", "target": "\"7580b45a-1dba-4690-bfbf-652fee25e1d9\""}, {"source": "\"a74d6aac-dbe9-48a6-83ca-648cd6ea933e\"", "target": "\"171718cd-10fd-484b-8d77-0ffcffc29163\""}, {"source": "\"54473599-719d-460b-92ba-3796dd951872\"", "target": "\"de7d0e94-618f-4982-b3e5-8806d88cad5d\""}, {"source": "\"54473599-719d-460b-92ba-3796dd951872\"", "target": "\"8d568d81-9c22-4d94-81b2-27a2d730ba98\""}, {"source": "\"bcd04f60-0a4c-4213-90f7-139c0ddf5bef\"", "target": "\"de7d0e94-618f-4982-b3e5-8806d88cad5d\""}, {"source": "\"63607e63-4428-4578-bf2a-12a49649b49c\"", "target": "\"de7d0e94-618f-4982-b3e5-8806d88cad5d\""}, {"source": "\"6ed3a191-0128-453e-b0b6-37c48593a6f0\"", "target": "\"6ed3a191-0128-453e-b0b6-37c48593a6f0\""}, {"source": "\"6ed3a191-0128-453e-b0b6-37c48593a6f0\"", "target": "\"de7d0e94-618f-4982-b3e5-8806d88cad5d\""}, {"source": "\"6ed3a191-0128-453e-b0b6-37c48593a6f0\"", "target": "\"1cd8fd81-a7c4-44ea-8b7a-d803e9b491af\""}, {"source": "\"6ed3a191-0128-453e-b0b6-37c48593a6f0\"", "target": "\"2daf1307-afb4-49e4-98cb-66ac7eb27cf0\""}, {"source": "\"1cd8fd81-a7c4-44ea-8b7a-d803e9b491af\"", "target": "\"6ed3a191-0128-453e-b0b6-37c48593a6f0\""}, {"source": "\"ce27d04b-aa7b-4fd5-98d3-30aa645f0d46\"", "target": "\"efd79527-1cfb-48da-868e-6286cff21c34\""}, {"source": "\"22ae9c25-3123-4ed8-b765-369ac89d2942\"", "target": "\"de7d0e94-618f-4982-b3e5-8806d88cad5d\""}, {"source": "\"22ae9c25-3123-4ed8-b765-369ac89d2942\"", "target": "\"63607e63-4428-4578-bf2a-12a49649b49c\""}, {"source": "\"22ae9c25-3123-4ed8-b765-369ac89d2942\"", "target": "\"f0da3356-3797-4ddc-8306-cd333f159754\""}]}

    function random_hex_colors(n) {
        const hexColors = [];

        for (let i = 0; i < n; i++) {
            let randomColor = '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');
            hexColors.push(randomColor);
        }

        return hexColors;
    }

    function get_year(str) { return str.substring(0, 4) }
    function get_note_name(str) { return str.substring(15) }
    function fix_link(str) { return "/notes/".concat(get_year(str), "/", get_note_name(str), "/").replaceAll("_", "-") }

    function draw_graph(data, height, width) {
        // Radius function for nodes. Node radius are function of centrality
        scale = 1.;
        radius = d => {
            if (!d.radius) {
                d.radius = 11 + 24 * Math.pow(d.centrality, 4/5);
            }
            return d.radius;
        };
        color = "#ffffff";

        // Number of colors is the number of clusters (given by communityLabel)
        num_colors = Math.max(...data.nodes.map(d => d.communityLabel)) + 1;
        angleArr = [...Array(num_colors).keys()].map(x => 2 * Math.PI * x / num_colors);
        // Cluster centers around an circle
        centersx = angleArr.map(x => Math.cos(Math.PI + x));
        centersy = angleArr.map(x => Math.sin(Math.PI + x));
        // Color palette
        nodeColors = random_hex_colors(num_colors);
        // Color function just maps cluster to color palette
        nodeColor = d => {
            return nodeColors[d.communityLabel];
        };
        // Make the nodes draggable
        drag = simulation => {
            function dragsubject(event) {
                return simulation.find(event.x, event.y);
            }

            function dragstarted(event) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                event.subject.fx = event.subject.x;
                event.subject.fy = event.subject.y;        }

            function dragged(event) {
                event.subject.fx = event.x;
                event.subject.fy = event.y;
            }

            function dragended(event) {
                if (!event.active) simulation.alphaTarget(0);
                event.subject.fx = null;
                event.subject.fy = null;
            }

            return d3.drag()
                .subject(dragsubject)
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended);
        };
        // Make nodes interactive to hovering
        handleMouseOver = (d, i) => {
            nde = d3.select(d.currentTarget);
            nde.attr("fill", "#999")
                .attr("r", nde.attr("r") * 1.4);

            d3.selectAll("text")
                .filter('#' + CSS.escape(d.currentTarget.id))
                .style("display", "block");

            d3.selectAll("line")
                .attr("stroke-width", 1);

            d3.selectAll("line")
                .filter((l, _) =>
                        l.source.index == i.index ||
                        l.target.index == i.index)
                .attr("stroke-width", 8);
        };
        handleMouseOut = (d, _) => {
            nde = d3.select(d.currentTarget);
            nde.attr("fill", nodeColor)
                .attr("r", nde.attr("r") / 1.4);

            d3.selectAll("text")
                .filter('#' + CSS.escape(d.currentTarget.id))
                .style("display", "none");

        };

        // Graph data
        const links = data.links.map(d => Object.create(d));
        const nodes = data.nodes.map(d => Object.create(d));

        // Force simulation for the graph
        simulation = d3.forceSimulation(nodes)
        .alpha(0.9)
        .velocityDecay(0.6)
            .force("link", d3.forceLink(links).id(d => d.id).strength(.1))
            .force("charge", d3.forceManyBody()
                .strength(-250))
            .force('collision',
                d3.forceCollide().radius(d => radius(d) * 1.2).strength(1.5))
            .force('x', d3.forceX().x(function(d) {
                return width / 2 +  (width / 4) * centersx[d.communityLabel];
            }).strength(0.25))
            .force('y', d3.forceY().y(function(d) {
                return height / 2 +  (height / 8) * centersy[d.communityLabel];
            }).strength(0.25));

        // Create all the graph elements
        const svg = d3.select("svg#note-graph")
            .attr('max-width', '60%')
            .attr("viewBox", [0, 0, width, height]);

        const link = svg.append("g")
            .attr("stroke", "#888")
            .attr("stroke-opacity", 0.6)
            .selectAll("line")
            .data(links)
            .join("line")
            .attr("stroke-dasharray", d => (d.predicted? "5,5": "0,0"))
            .attr("stroke-width", 1);

        const node = svg.append("g")
            .selectAll("circle")
            .data(nodes)
            .join("a")
            .attr("xlink:href", d => {
                return fix_link(d.lnk);
            })
            .attr("id", d => "circle_" + d.lnk)
            .append("circle")
            .attr("id", d => d.id.toLowerCase())
            .attr("r", radius)
            .attr("fill", nodeColor)
            .attr("stroke", "#000")
            .attr("stroke-width", 1.3)
            .on("mouseover", handleMouseOver)
            .on("mouseout", handleMouseOut)
            .call(drag(simulation));

        node.append("title")
            .text(d => d.label.replace(/"/g, ''));

        // Nodes have a label that is visible on hover
        // They have two layers a rectangle "background" and the text on top
        const label = svg.append("g")
            .selectAll("text")
            .data(nodes)
            .join("g");
        const label_background = label.append("text")
            .style("font-size", "25px")
            .text(function (d) { return "  "+ d.label.replace(/"/g, '') + "  "; })
            .attr("dy", -25)
            .attr("id", d => d.id.toLowerCase())
            .attr("class", "node_label")
            .style("display", "none")
            .style("pointer-events", "none")
            .style("alignment-baseline", "middle")
            .attr("filter", "url(#solid)");
        const label_text = label.append("text")
            .style("fill", "#222")
            .style("font-size", "25px")
            .text(function (d) { return "  "+ d.label.replace(/"/g, '') + "  "; })
            .attr("dy", -25)
            .attr("id", d => d.id.toLowerCase())
            .attr("class", "node_label")
            .style("display", "none")
            .style("pointer-events", "none")
            .style("alignment-baseline", "middle");

        // We sort the nodes now because some of the sorting function need the
        // node radius
        //sort_items();

        // Run the simulation
        simulation.on("tick", () => {
            link.attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node.attr("cx", d => d.x)
                .attr("cy", d => d.y);

            label_text.attr("x", d => d.x)
                .attr("y", d => d.y);

            label_background.attr("x", d => d.x)
                .attr("y", d => d.y);
        });
    }

    let height = window.innerHeight;
    let width = window.innerWidth;
    draw_graph(graph_data, height, width);
</script>
