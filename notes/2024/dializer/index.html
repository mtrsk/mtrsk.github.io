<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
  Dializer

    </title>
    <meta property="og:url" content="https://mtrsk.github.io/notes/2024/dializer/">
  <meta property="og:site_name" content="Benevides&#39; Blog">
  <meta property="og:title" content="Dializer">
  <meta property="og:description" content=":ID: 54473599-719d-460b-92ba-3796dd951872
Dialyzer is a static analysis tool that identifies software discrepancies, such as definite type errors, code that is unreachable because of programming errors, and unnecessary tests in Erlang and Elixir modules or an entire codebases.
Erlang Type Notation We can define a subset of Erlang types as follows:
Type :: any() | none() | pid() | port() | reference() | [] | Atom | binary() | float() | Fun | Integer | [Type] | Tuple | Union | UserDefined Union :: Type1 | Type2 | .">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:published_time" content="2024-10-09T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-10-09T00:00:00+00:00">
    <meta property="article:tag" content="Erlang">
    <meta property="article:tag" content="Elixir">
<link rel="stylesheet" href="/css/main.min.1135c79bd24c232c465ba2c4e5a9644086ce3f8358dbd0e0d76c5e86d24f1fad.css" />
    
        <script type="text/javascript" src ="https://d3js.org/d3.v7.min.js"></script>
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)']]                  
    }
  };
</script>

    
  </head>
  <body><nav>
  <img
    src="/img/logo.png"
    alt="put your logo here"
    width="128"
    height="128"
  />
  <div>
    <h1>Benevides&#39; Blog</h1><p>&#34;Writing is nothing more than a guided dream.&#34;</p>
  </div>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/blog">Blog</a></li>
    <li><a href="/notes">Notes</a></li>
    <li><a href="/blogroll">BlogRoll</a></li>
  </ul>
</nav>
<main>
  <h2>Dializer
    <small>
      <time>October 9, 2024</time>
    by Marcos Benevides


    </small>
  </h2><p>:ID:       54473599-719d-460b-92ba-3796dd951872</p>
<p>Dialyzer is a static analysis tool that identifies software discrepancies, such
as definite type errors, code that is unreachable because of programming errors,
and unnecessary tests in <a href="/notes/2024/erlang/">Erlang</a> and <a href="/notes/2024/elixir/">Elixir</a> modules or an entire codebases.</p>
<h2 id="erlang-type-notation">Erlang Type Notation</h2>
<p>We can define a subset of Erlang types as follows:</p>
<pre tabindex="0"><code class="language-nil" data-lang="nil">Type ::
      any()
    | none()
    | pid()
    | port()
    | reference()
    | []
    | Atom
    | binary()
    | float()
    | Fun
    | Integer
    | [Type]
    | Tuple
    | Union
    | UserDefined
Union :: Type1 | Type2 | ...
Atom :: atom() | Erlang_Atom
Integer :: integer() | Min .. Max
Fun :: fun() | fun((...) -&gt; Type)
Tuple :: tuple() | {T1, T2, ... Tn}
</code></pre><p>New types can be defined with the following syntax:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-erlang" data-lang="erlang"><span class="line"><span class="cl">  <span class="o">-</span><span class="n">type</span> <span class="nv">NewTypeName</span><span class="p">(</span><span class="nv">TVar1</span><span class="p">,</span> <span class="nv">TVar2</span><span class="p">,</span> <span class="p">...</span> <span class="p">,</span> <span class="nv">TVarN</span><span class="p">)</span> <span class="p">::</span> <span class="nv">Type</span><span class="p">.</span>
</span></span></code></pre></div><h3 id="specifying-the-input-and-output-types-of-a-function">Specifying the Input and Output Types of a Function</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-erlang" data-lang="erlang"><span class="line"><span class="cl"><span class="p">-</span><span class="ni">spec</span> <span class="nn">file</span><span class="p">:</span><span class="nf">open</span><span class="p">(</span><span class="nv">FileName</span><span class="p">,</span> <span class="nv">Modes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="nv">Handle</span><span class="p">}</span> <span class="p">|</span> <span class="p">{</span><span class="n">error</span><span class="p">,</span> <span class="nv">Why</span><span class="p">}</span> <span class="k">when</span>
</span></span><span class="line"><span class="cl">    <span class="nv">FileName</span> <span class="p">::</span> <span class="n">string</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nv">Modes</span> <span class="p">::</span> <span class="p">[</span><span class="nv">Mode</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nv">Mode</span> <span class="p">::</span> <span class="n">read</span> <span class="p">|</span> <span class="n">write</span> <span class="p">|</span> <span class="p">...</span>
</span></span><span class="line"><span class="cl">    <span class="nv">Handle</span> <span class="p">::</span> <span class="n">file_handle</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nv">Why</span> <span class="p">::</span> <span class="n">error_term</span><span class="p">().</span>
</span></span></code></pre></div><h3 id="exporting-types">Exporting Types</h3>
<p>A module can export some types to declare that other modules are allowed to
refer to them as remote types. This declaration has the following form:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-erlang" data-lang="erlang"><span class="line"><span class="cl">  <span class="o">-</span><span class="n">export_type</span><span class="p">([</span><span class="nv">T1</span><span class="o">/</span><span class="nv">A1</span><span class="p">,</span> <span class="p">...,</span> <span class="nv">Tk</span><span class="o">/</span><span class="nv">Ak</span><span class="p">]).</span>
</span></span></code></pre></div><h3 id="opaque-types">Opaque Types</h3>
<p>The main use case for opacity in Erlang is to hide the implementation of a data
type, enabling evolving the API while minimizing the risk of breaking consumers.</p>
<h2 id="running-dializer">Running Dializer</h2>
<h3 id="things-that-confuse-dializer">Things that confuse Dializer</h3>
<p>The dialyzer can get easily confused. We can help prevent this by following a
few simple rules. (<a href="#citeproc_bib_item_1">Armstrong 2013, 151</a>).</p>
<ul>
<li>Avoid using <code>-compile(export_all)</code>.</li>
<li>Provide detailed type specifications for all the arguments to the <strong>exported</strong>
functions in the module.</li>
<li>Provide default arguments to all elements in a record definition. If you don&rsquo;t
provide a default, the atom <code>undefined</code> is taken as the default.</li>
<li>Using anonymous variables in arguments to a function often results in types
that are far less specific than you had intended; try to constrain variables
as much as possible.</li>
</ul>
<h2 id="references">References</h2>
<style>.csl-entry{text-indent: -1.5em; margin-left: 1.5em;}</style><div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>Armstrong, Joe. 2013. “Programming Erlang: Software for a Concurrent World.”</div>
</div>



   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   





<footer>
  </br>
  <p>
  Built with <a href="https://orgmode.org/">Orgmode</a>, <a href="https://www.gnu.org/software/emacs/">Emacs</a> and <a href="https://nixos.org/">Nix</a>, source code availiable <a href="https://github.com/mtrsk/mtrsk.github.io">here</a>.
  </p>
</footer>

      </main>
    </main>
  </body>
</html>
