<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
  Erlang Shell

    </title>
    <meta property="og:url" content="https://mtrsk.github.io/notes/2024/erlang-shell/">
  <meta property="og:site_name" content="Benevides&#39; Blog">
  <meta property="og:title" content="Erlang Shell">
  <meta property="og:description" content=":ID: bcd04f60-0a4c-4213-90f7-139c0ddf5bef
Some features of the Erlang shell.
Basics Compiling and Running “Hello World” in the Shell -module(hello). -export([start/0]). start() -&gt; io:format(&#34;Hello world~n&#34;). Running the hello.erl program in the erlang shell.
$ erl Erlang/OTP 26 [erts-14.2.5] [source] [64-bit] [smp:24:24] [ds:24:24:10] [async-threads:1] [jit:ns] Eshell V14.2.5 (press Ctrl&#43;G to abort, type help(). for help) 1&gt; c(hello). {ok,hello} 2&gt; hello:start(). Hello world ok Compiling Outside the Erlang Shell $ erlc hello.erl $ erl -noshell -s hello start -s init stop erlc evokes the Erlang compiler from the command line.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:published_time" content="2024-10-04T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-10-04T00:00:00+00:00">
    <meta property="article:tag" content="Erlang">
<link rel="stylesheet" href="/css/main.min.1135c79bd24c232c465ba2c4e5a9644086ce3f8358dbd0e0d76c5e86d24f1fad.css" />
    
        <script type="text/javascript" src ="https://d3js.org/d3.v7.min.js"></script>
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)']]                  
    }
  };
</script>

    
  </head>
  <body><nav>
  <img
    src="/img/logo.png"
    alt="put your logo here"
    width="128"
    height="128"
  />
  <div>
    <h1>Benevides&#39; Blog</h1><p>&#34;Writing is nothing more than a guided dream.&#34;</p>
  </div>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/blog">Blog</a></li>
    <li><a href="/notes">Notes</a></li>
    <li><a href="/blogroll">BlogRoll</a></li>
  </ul>
</nav>
<main>
  <h2>Erlang Shell
    <small>
      <time>October 4, 2024</time>
    by Marcos Benevides


    </small>
  </h2><p>:ID:       bcd04f60-0a4c-4213-90f7-139c0ddf5bef</p>
<p>Some features of the <a href="/notes/2024/erlang/">Erlang</a> shell.</p>
<h2 id="basics">Basics</h2>
<h3 id="compiling-and-running-hello-world-in-the-shell">Compiling and Running &ldquo;Hello World&rdquo; in the Shell</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-erlang" data-lang="erlang"><span class="line"><span class="cl">  <span class="o">-</span><span class="n">module</span><span class="p">(</span><span class="n">hello</span><span class="p">).</span>
</span></span><span class="line"><span class="cl">  <span class="o">-</span><span class="n">export</span><span class="p">([</span><span class="n">start</span><span class="o">/</span><span class="mi">0</span><span class="p">]).</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">start</span><span class="p">()</span> <span class="o">-&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">&#34;Hello world</span><span class="si">~n</span><span class="s">&#34;</span><span class="p">).</span>
</span></span></code></pre></div><p>Running the <code>hello.erl</code> program in the erlang shell.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">  $ erl
</span></span><span class="line"><span class="cl">  Erlang/OTP <span class="m">26</span> <span class="o">[</span>erts-14.2.5<span class="o">]</span> <span class="o">[</span>source<span class="o">]</span> <span class="o">[</span>64-bit<span class="o">]</span> <span class="o">[</span>smp:24:24<span class="o">]</span> <span class="o">[</span>ds:24:24:10<span class="o">]</span> <span class="o">[</span>async-threads:1<span class="o">]</span> <span class="o">[</span>jit:ns<span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  Eshell V14.2.5 <span class="o">(</span>press Ctrl+G to abort, <span class="nb">type</span> help<span class="o">()</span>. <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  1&gt; c<span class="o">(</span>hello<span class="o">)</span>.
</span></span><span class="line"><span class="cl">  <span class="o">{</span>ok,hello<span class="o">}</span>
</span></span><span class="line"><span class="cl">  2&gt; hello:start<span class="o">()</span>.
</span></span><span class="line"><span class="cl">  Hello world
</span></span><span class="line"><span class="cl">  ok
</span></span></code></pre></div><h4 id="compiling-outside-the-erlang-shell">Compiling Outside the Erlang Shell</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">  $ erlc hello.erl
</span></span><span class="line"><span class="cl">  $ erl -noshell -s hello start -s init stop
</span></span></code></pre></div><blockquote>
<p><code>erlc</code> evokes the Erlang compiler from the command line. The compiler compiles the code in <code>hello.erl</code> and produces an object code file called <code>hello.beam</code>.</p>
<p>The <code>erl -noshell</code> command loads the module <code>hello</code> and evaluates the function
<code>hello:start()</code>. After this, it evaluates the expression <code>init:stop()</code>, which
terminates the Erlang session. (<a href="#citeproc_bib_item_1">Armstrong 2013, 14</a>)</p>
</blockquote>
<h2 id="commands">Commands</h2>
<h3 id="seeing-your-bound-variables">Seeing Your Bound Variables</h3>
<p><code>b()</code> shows all bound variables in the current erlang shell.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">    &gt; b<span class="o">()</span>.
</span></span><span class="line"><span class="cl">    <span class="nv">N</span> <span class="o">=</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">    <span class="nv">Number</span> <span class="o">=</span> <span class="m">5</span>
</span></span></code></pre></div><h3 id="clearing-bound-variables-in-the-shell">Clearing Bound Variables in the Shell</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">  &gt; f<span class="o">(</span>N<span class="o">)</span>.
</span></span><span class="line"><span class="cl">  &gt; f<span class="o">()</span>.
</span></span></code></pre></div><h3 id="getting-help">Getting Help</h3>
<blockquote>
<p>The Erlang shell has a number of built-in commands. You can see them all
with the shell command <code>help()</code>. (<a href="#citeproc_bib_item_1">Armstrong 2013, 173</a>).</p>
</blockquote>
<h2 id="compiling-and-running-erlang-programs">Compiling and running Erlang programs</h2>
<h3 id="modifying-the-environment">Modifying the Environment</h3>
<p>You can find the value of the current load path by starting an Erlang shell
and giving the command <code>code:get_path()</code>. The two most common functions that we
use to manipulate the load path are as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-erlang" data-lang="erlang"><span class="line"><span class="cl"><span class="c">% Add a new directory to the start of the load path.
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="p">-</span><span class="ni">spec</span> <span class="nn">code</span><span class="p">:</span><span class="nf">add_patha</span><span class="p">(</span><span class="nv">Dir</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">true</span> <span class="p">|</span> <span class="p">{</span><span class="n">error</span><span class="p">,</span> <span class="n">bad_directory</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c">% Add a new directory to the end of the load path.
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="p">-</span><span class="ni">spec</span> <span class="nn">code</span><span class="p">:</span><span class="nf">add_pathz</span><span class="p">(</span><span class="nv">Dir</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">true</span> <span class="p">|</span> <span class="p">{</span><span class="n">error</span><span class="p">,</span> <span class="n">bad_directory</span><span class="p">}</span>
</span></span></code></pre></div><p>Alternatively, you can start Erlang with a command like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ erl -pa Dir1 -pa Dir2 ... -pz DirK1 -pz DirK2
</span></span></code></pre></div><h3 id="scripting">Scripting</h3>
<p>Often we want to be able to execute an arbitrary Erlang function from the OS command
line. The <code>-eval</code> argument is very handy for quick scripting.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">  erl <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>      -eval <span class="s1">&#39;io:format(&#34;Memory: ~p~n&#34;, [erlang:memory(total)]).&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>      -noshell -s init stop
</span></span></code></pre></div><h4 id="run-as-an-escript">Run As an Escript</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-erlang" data-lang="erlang"><span class="line"><span class="cl">  <span class="err">#</span><span class="o">!/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">env</span> <span class="n">escript</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">main</span><span class="p">([</span><span class="nv">A</span><span class="p">])</span> <span class="o">-&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nv">I</span> <span class="o">=</span> <span class="nb">list_to_integer</span><span class="p">(</span><span class="nv">A</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="nv">F</span> <span class="o">=</span> <span class="n">fac</span><span class="p">(</span><span class="nv">I</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">&#34;factorial </span><span class="si">~w</span><span class="s"> = </span><span class="si">~w~n</span><span class="s">&#34;</span><span class="p">,</span> <span class="p">[</span><span class="nv">I</span><span class="p">,</span> <span class="nv">F</span><span class="p">]).</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">fac</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">fac</span><span class="p">(</span><span class="nv">N</span><span class="p">)</span> <span class="o">-&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nv">N</span> <span class="o">*</span> <span class="n">fac</span><span class="p">(</span><span class="nv">N</span> <span class="o">-</span> <span class="mi">1</span><span class="p">).</span>
</span></span></code></pre></div><h2 id="debugging">Debugging</h2>
<h3 id="reading-crash-dumps">Reading Crash Dumps</h3>
<p>If Erlang crashes, it leaves behind a file called <code>erl_crash.dump</code>. To start the
analyzer, give the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">  crashdump_viewer:start<span class="o">()</span>
</span></span></code></pre></div><h2 id="references">References</h2>
<style>.csl-entry{text-indent: -1.5em; margin-left: 1.5em;}</style><div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>Armstrong, Joe. 2013. “Programming Erlang: Software for a Concurrent World.”</div>
</div>



   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   





<footer>
  </br>
  <p>
  Built with <a href="https://orgmode.org/">Orgmode</a>, <a href="https://www.gnu.org/software/emacs/">Emacs</a> and <a href="https://nixos.org/">Nix</a>, source code availiable <a href="https://github.com/mtrsk/mtrsk.github.io">here</a>.
  </p>
</footer>

      </main>
    </main>
  </body>
</html>
