<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
  Erlang Term Storage

    </title>
    <meta property="og:url" content="https://schonfinkel.github.io/notes/2024/erlang-term-storage/">
  <meta property="og:site_name" content="Benevides&#39; Blog">
  <meta property="og:title" content="Erlang Term Storage">
  <meta property="og:description" content=":ID: 37c6ea44-0c80-4c57-a36e-98d37e8a3413 :ROAM_ALIAS: “ETS”
Erlang Term Storage, commonly referred to as ETS, is a powerful storage engine built into Otp. Every entry in an ETS table is a tuple (or corresponding record), and one piece of the tuple is designated the key.
ETS can hold four kinds of collections (Laurent 2017, 141):
Sets (set): Can contain only one entry with a given key. Ordered Sets (ordered_set): Same as a set, but also maintains a traversal order based on the keys.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:published_time" content="2024-10-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-10-10T00:00:00+00:00">
    <meta property="article:tag" content="Erlang">
    <meta property="article:tag" content="Elixir">
    <meta property="article:tag" content="OTP">
<link rel="stylesheet" href="/css/main.min.1135c79bd24c232c465ba2c4e5a9644086ce3f8358dbd0e0d76c5e86d24f1fad.css" />
    
        <script type="text/javascript" src ="https://d3js.org/d3.v7.min.js"></script>
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)']]                  
    }
  };
</script>

    
  </head>
  <body><nav>
  <img
    src="/img/logo.png"
    alt="put your logo here"
    width="128"
    height="128"
  />
  <div>
    <h1>Benevides&#39; Blog</h1><p>&#34;Writing is nothing more than a guided dream.&#34;</p>
  </div>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/blog">Blog</a></li>
    <li><a href="/notes">Notes</a></li>
    <li><a href="/blogroll">BlogRoll</a></li>
  </ul>
</nav>
<main>
  <h2>Erlang Term Storage
    <small>
      <time>October 10, 2024</time>
    by Marcos Benevides


    </small>
  </h2><p>:ID:       37c6ea44-0c80-4c57-a36e-98d37e8a3413
:ROAM_ALIAS: &ldquo;ETS&rdquo;</p>
<p>Erlang Term Storage, commonly referred to as ETS, is a powerful storage engine
built into <a href="/notes/2024/otp/">Otp</a>. Every entry in an ETS table is a tuple (or corresponding
record), and one piece of the tuple is designated the key.</p>
<p>ETS can hold four kinds of collections (<a href="#citeproc_bib_item_1">Laurent 2017, 141</a>):</p>
<ol>
<li>Sets (<code>set</code>): Can contain only one entry with a given key.</li>
<li>Ordered Sets (<code>ordered_set</code>): Same as a set, but also maintains a traversal
order based on the keys. Great for anything you want to keep in alphabetic or
numeric order.</li>
<li>Bags (<code>bag</code>): Lets you store more than one entry with a given key. However, if
you have multiple entries that have identical values, they get combined into
a single entry.</li>
<li>Duplicate Bags (<code>duplicate_bag</code>): Not only lets you store more than one entry
with a given key, but also lets you store multiple entries with identical
values.</li>
</ol>
<h2 id="creating-and-populating-a-table">Creating and populating a table</h2>
<ul>
<li>The <code>ets:new/2</code> function lets you create a table.</li>
<li>If you do specify <code>named_table</code>, processes can reach the table as long as they
know the name, without needing access to that return value.</li>
<li>Using the <code>keypos</code> tuple lets you specify which record value should be the key.
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-erlang" data-lang="erlang"><span class="line"><span class="cl">    <span class="n">rd</span><span class="p">(</span><span class="n">food</span><span class="p">,</span> <span class="p">{</span><span class="n">name</span><span class="p">,</span> <span class="n">calories</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">group</span><span class="p">}).</span>
</span></span><span class="line"><span class="cl">    <span class="nn">ets</span><span class="p">:</span><span class="nf">new</span><span class="p">(</span><span class="n">food</span><span class="p">,</span> <span class="p">[</span><span class="n">ordered_set</span><span class="p">,</span> <span class="p">{</span><span class="n">keypos</span><span class="p">,</span><span class="nl">#food.name</span><span class="p">},</span> <span class="n">named_table</span><span class="p">]).</span>
</span></span></code></pre></div></li>
</ul>
<h2 id="simple-queries">Simple Queries</h2>
<ul>
<li><code>ets:lookup/2</code></li>
</ul>
<h2 id="references">References</h2>
<style>.csl-entry{text-indent: -1.5em; margin-left: 1.5em;}</style><div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>Laurent, Simon St. 2017. <i>Introducing Erlang: Getting Started in Functional Programming</i>. O’Reilly Media, Inc.</div>
</div>



   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   




  <hr>
  <div class="bl-section">
    <h4>Links to this note</h4>
    <div class="backlinks">
      <ul>
       
          <li><a href="/notes/2024/mnesia/">Mnesia</a></li>
       
     </ul>
    </div>
  </div>


<footer>
  </br>
  <p>
  Built with <a href="https://orgmode.org/">Orgmode</a>, <a href="https://www.gnu.org/software/emacs/">Emacs</a> and <a href="https://nixos.org/">Nix</a>, source code availiable <a href="https://github.com/mtrsk/mtrsk.github.io">here</a>.
  </p>
</footer>

      </main>
    </main>
  </body>
</html>
